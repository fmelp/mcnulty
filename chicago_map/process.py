import json
import pandas as pd
import re
import numpy as np


with open('~/Desktop/chicago_map/subunits.json', 'r') as json_file:
    json_data = json.load(json_file)


zp_pe = {60176: -45.8, 60706: 1.5, 60707: -26.1, 60068: 2.7, 60714: 5.7, 60601: 149.7, 60602: 14.8, 60603: 109.6, 60604: 207.6, 60605: 82.4, 60606: 16.2, 60607: 39.7, 60608: -39.1, 60609: -56.4, 60610: 121.9, 60611: 283.0, 60612: -18.1, 60613: 44.7, 60614: 73.7, 60615: 37.7, 60616: 24.8, 60617: -52.5, 60618: -14.8, 60619: 12.4, 60620: -25.5, 60621: -29.3, 60622: 12.9, 60623: -73.5, 60624: -44.9, 60625: -26.5, 60626: 0.0, 60628: -48.2, 60630: -18.0, 60631: -1.8, 60632: -77.6, 60634: -36.4, 60636: -46.4, 60637: 16.9, 60639: -68.1, 60640: 70.1, 60641: -31.4, 60643: -24.6, 60644: -18.4, 60645: -44.0, 60646: 1.8, 60647: -9.7, 60649: 39.0, 60651: -51.8, 60652: -65.3, 60653: 66.2, 60654: 149.7, 60655: -39.7, 60656: 4.3, 60657: 72.6, 60018: -44.7, 60659: -48.7, 60660: 56.5, 60661: 91.0}


for i in range(len(json_data['features'])):
    if json_data['features'][i]['properties']['Zip_Code'] in zp_pe.keys():
        json_data['features'][i]['properties']['guests'] = zp_pe[str(json_data['features'][i]['properties']['Zip_Code'])]


with open("fixed.json", "w") as f:
    json.dump(json_data, f)